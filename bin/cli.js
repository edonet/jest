#!/usr/bin/env node

/**
 *****************************************
 * Created by edonet@163.com
 * Created on 2022-12-11 19:49:13
 *****************************************
 */
'use strict';


/**
 *****************************************
 * 加载依赖
 *****************************************
 */
const { resolve } = require('path');
const { run } = require('jest-cli');


/**
 *****************************************
 * 设置环境变量
 *****************************************
 */
process.env.NODE_ENV = 'test';


/**
 *****************************************
 * 获取参数
 *****************************************
 */
const args = process.argv.slice(2);


/**
 *****************************************
 * 添加配置文件
 *****************************************
 */
if (!args.includes('--config')) {
  args.push(
    '--config',
    resolve(__dirname, '../dist/index.js'),
  );
}


/**
 *****************************************
 * 执行脚本
 *****************************************
 */
run(args);
